<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manajemen Data Siswa</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      height: 100%;
    }
    html {
      height: 100%;
    }
    .modal-backdrop {
      background-color: rgba(0, 0, 0, 0.5);
    }
    .loading-spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #3b82f6;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="min-h-full"><!-- Login Page -->
  <div id="loginPage" class="min-h-full flex items-center justify-center p-6" style="background-color: #f0f9ff;">
   <div class="w-full max-w-md">
    <div class="rounded-lg shadow-xl p-8" style="background-color: white;">
     <div class="text-center mb-8">
      <h1 class="text-3xl font-bold mb-2" style="color: #1e40af;">üéì Manajemen Data Siswa</h1>
      <p class="text-lg" style="color: #64748b;">Silakan login untuk melanjutkan</p>
     </div>
     <form id="loginForm">
      <div class="mb-4"><label for="usernameInput" class="block mb-2 font-semibold" style="color: #475569;">Username</label> <input type="text" id="usernameInput" required class="w-full px-4 py-3 border rounded-lg" style="border-color: #cbd5e1;" placeholder="Masukkan username">
      </div>
      <div class="mb-6"><label for="passwordInput" class="block mb-2 font-semibold" style="color: #475569;">Password</label> <input type="password" id="passwordInput" required class="w-full px-4 py-3 border rounded-lg" style="border-color: #cbd5e1;" placeholder="Masukkan password">
      </div>
      <div id="loginError" class="mb-4 p-3 rounded-lg hidden" style="background-color: #fee2e2; color: #dc2626;">
       <p id="loginErrorMessage"></p>
      </div><button type="submit" id="loginButton" class="w-full px-6 py-3 rounded-lg font-semibold transition-all" style="background-color: #3b82f6; color: white;"> <span id="loginButtonText">Login</span> </button>
     </form>
     <div class="mt-6 p-4 rounded-lg" style="background-color: #f1f5f9;">
      <p class="text-sm font-semibold mb-2" style="color: #475569;">Informasi:</p>
      <p class="text-sm" style="color: #64748b;">Login menggunakan akun admin yang terdaftar di database</p>
     </div>
    </div>
   </div>
  </div><!-- Main App -->
  <div id="app" class="min-h-full p-6 hidden" style="background-color: #f0f9ff;"><!-- Header -->
   <div class="max-w-6xl mx-auto mb-8">
    <div class="flex justify-between items-center">
     <div>
      <h1 id="appTitle" class="text-4xl font-bold mb-2" style="color: #1e40af;">Manajemen Data Siswa</h1>
      <p class="text-lg" style="color: #64748b;">Kelola data siswa dengan mudah</p>
     </div>
     <div class="text-right">
      <p class="text-sm mb-2" style="color: #64748b;">Login sebagai: <strong id="loggedInUser"></strong></p><button id="logoutButton" class="px-4 py-2 rounded-lg font-semibold transition-all text-sm" style="background-color: #ef4444; color: white;"> üö™ Logout </button>
     </div>
    </div>
   </div><!-- Controls -->
   <div class="max-w-6xl mx-auto mb-6 flex flex-wrap gap-4 items-center"><button id="addButton" class="px-6 py-3 rounded-lg font-semibold transition-all" style="background-color: #3b82f6; color: white;"> ‚ûï <span id="addButtonText">Tambah Siswa Baru</span> </button>
    <div class="flex gap-3 items-center ml-auto"><label for="sortSelect" class="font-semibold" style="color: #475569;">Urutkan:</label> <select id="sortSelect" class="px-4 py-2 border rounded-lg font-semibold" style="border-color: #cbd5e1; background-color: white; color: #475569;"> <option value="none">Tanpa Urutan</option> <option value="kelas-absen">Kelas &amp; Absen</option> <option value="absen">Absen Saja</option> <option value="nama">Nama A-Z</option> </select> <select id="kelasFilter" class="px-4 py-2 border rounded-lg font-semibold hidden" style="border-color: #cbd5e1; background-color: white; color: #475569;"> <option value="all">Semua Kelas</option> </select>
    </div>
   </div><!-- Students List -->
   <div class="max-w-6xl mx-auto">
    <div id="studentsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"><!-- Students will be loaded here -->
    </div>
    <div id="emptyState" class="text-center py-12 hidden">
     <p class="text-xl" style="color: #94a3b8;">Belum ada data siswa. Klik tombol di atas untuk menambah siswa baru.</p>
    </div>
    <div id="loadingState" class="text-center py-12">
     <div class="loading-spinner mx-auto"></div>
     <p class="mt-4" style="color: #64748b;">Memuat data...</p>
    </div>
   </div><!-- Modal Form -->
   <div id="modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center" style="z-index: 1000;">
    <div class="rounded-lg shadow-xl max-w-md w-full mx-4 p-6" style="background-color: white;">
     <h2 id="modalTitle" class="text-2xl font-bold mb-4" style="color: #1e40af;">Tambah Siswa</h2>
     <form id="studentForm">
      <div class="mb-4"><label for="absenInput" class="block mb-2 font-semibold" style="color: #475569;">Absen</label> <input type="text" id="absenInput" required class="w-full px-4 py-2 border rounded-lg" style="border-color: #cbd5e1;" placeholder="Nomor absen">
      </div>
      <div class="mb-4"><label for="nisInput" class="block mb-2 font-semibold" style="color: #475569;">NIS</label> <input type="text" id="nisInput" required class="w-full px-4 py-2 border rounded-lg" style="border-color: #cbd5e1;" placeholder="Nomor Induk Siswa">
      </div>
      <div class="mb-4"><label for="namaInput" class="block mb-2 font-semibold" style="color: #475569;">Nama Lengkap</label> <input type="text" id="namaInput" required class="w-full px-4 py-2 border rounded-lg" style="border-color: #cbd5e1;" placeholder="Masukkan nama lengkap">
      </div>
      <div class="mb-6"><label for="kelasInput" class="block mb-2 font-semibold" style="color: #475569;">Kelas</label> <input type="text" id="kelasInput" required class="w-full px-4 py-2 border rounded-lg" style="border-color: #cbd5e1;" placeholder="Contoh: 10A, 11B">
      </div>
      <div class="flex gap-3"><button type="submit" id="submitButton" class="flex-1 px-6 py-3 rounded-lg font-semibold transition-all" style="background-color: #3b82f6; color: white;"> <span id="submitButtonText">Simpan</span> </button> <button type="button" id="cancelButton" class="flex-1 px-6 py-3 rounded-lg font-semibold transition-all" style="background-color: #e2e8f0; color: #475569;"> Batal </button>
      </div>
     </form>
    </div>
   </div><!-- Delete Confirmation Modal -->
   <div id="deleteModal" class="fixed inset-0 modal-backdrop hidden items-center justify-center" style="z-index: 1001;">
    <div class="rounded-lg shadow-xl max-w-md w-full mx-4 p-6" style="background-color: white;">
     <h2 class="text-2xl font-bold mb-4" style="color: #dc2626;">Konfirmasi Hapus</h2>
     <p class="mb-6" style="color: #475569;">Apakah Anda yakin ingin menghapus data siswa <strong id="deleteStudentName"></strong>?</p>
     <div class="flex gap-3"><button id="confirmDeleteButton" class="flex-1 px-6 py-3 rounded-lg font-semibold transition-all" style="background-color: #dc2626; color: white;"> Hapus </button> <button id="cancelDeleteButton" class="flex-1 px-6 py-3 rounded-lg font-semibold transition-all" style="background-color: #e2e8f0; color: #475569;"> Batal </button>
     </div>
    </div>
   </div><!-- Toast Notification -->
   <div id="toast" class="fixed bottom-6 right-6 px-6 py-4 rounded-lg shadow-lg hidden transition-all" style="background-color: #10b981; color: white; z-index: 1002;">
    <p id="toastMessage"></p>
   </div>
  </div>
  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDAXMd9cAPtkgjo7R4xEZY18IGOJMxsJ3g",
      authDomain: "view-count-1287b.firebaseapp.com",
      databaseURL: "https://view-count-1287b-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "view-count-1287b",
      storageBucket: "view-count-1287b.firebasestorage.app",
      messagingSenderId: "264930996114",
      appId: "1:264930996114:web:6f7b6ed38a73e992529b4b",
      measurementId: "G-99YYF6TG0P"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const siswaRef = database.ref('siswa');

    // Default Config
    const defaultConfig = {
      app_title: "Manajemen Data Siswa",
      add_button_text: "Tambah Siswa Baru",
      background_color: "#f0f9ff",
      card_color: "#ffffff",
      primary_color: "#3b82f6",
      text_color: "#1e40af",
      secondary_text_color: "#64748b",
      font_family: "system-ui",
      font_size: 16
    };

    // State
    let currentEditId = null;
    let studentToDelete = null;
    let studentsData = {};
    let currentSort = 'none';
    let currentKelasFilter = 'all';
    let currentUser = null;
    let adminData = {};
    
    // Reference to admin table
    const adminRef = database.ref('admin');

    // Load admin data from Firebase
    function loadAdminData() {
      adminRef.on('value', (snapshot) => {
        adminData = snapshot.val() || {};
      });
    }
    
    // Check if user is logged in
    function checkLogin() {
      const savedUser = localStorage.getItem('loggedInUser');
      if (savedUser) {
        currentUser = savedUser;
        showMainApp();
      } else {
        showLoginPage();
      }
    }
    
    // Show login page
    function showLoginPage() {
      document.getElementById('loginPage').classList.remove('hidden');
      document.getElementById('app').classList.add('hidden');
    }
    
    // Show main app
    function showMainApp() {
      document.getElementById('loginPage').classList.add('hidden');
      document.getElementById('app').classList.remove('hidden');
      document.getElementById('loggedInUser').textContent = currentUser;
      loadStudents();
    }
    
    // Handle login
    document.getElementById('loginForm').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const username = document.getElementById('usernameInput').value;
      const password = document.getElementById('passwordInput').value;
      const loginError = document.getElementById('loginError');
      const loginErrorMessage = document.getElementById('loginErrorMessage');
      const loginButton = document.getElementById('loginButton');
      const loginButtonText = document.getElementById('loginButtonText');
      
      loginButton.disabled = true;
      loginButtonText.innerHTML = '<div class="loading-spinner mx-auto"></div>';
      
      // Check credentials from admin database
      setTimeout(() => {
        let isValidLogin = false;
        let foundUsername = '';
        
        // Check if username and password match any admin record
        Object.entries(adminData).forEach(([id, admin]) => {
          if (admin.username === username && admin.password === password) {
            isValidLogin = true;
            foundUsername = admin.username;
          }
        });
        
        if (isValidLogin) {
          currentUser = foundUsername;
          localStorage.setItem('loggedInUser', foundUsername);
          loginError.classList.add('hidden');
          showMainApp();
          document.getElementById('loginForm').reset();
        } else {
          loginError.classList.remove('hidden');
          loginErrorMessage.textContent = 'Username atau password salah!';
        }
        
        loginButton.disabled = false;
        loginButtonText.textContent = 'Login';
      }, 500);
    });
    
    // Handle logout
    document.getElementById('logoutButton').addEventListener('click', () => {
      currentUser = null;
      localStorage.removeItem('loggedInUser');
      showLoginPage();
      showToast('Berhasil logout!');
    });
    
    // Load students from Firebase
    function loadStudents() {
      document.getElementById('loadingState').classList.remove('hidden');
      document.getElementById('emptyState').classList.add('hidden');
      
      siswaRef.on('value', (snapshot) => {
        studentsData = snapshot.val() || {};
        renderStudents();
        document.getElementById('loadingState').classList.add('hidden');
      });
    }

    // Render students list
    function renderStudents() {
      const studentsList = document.getElementById('studentsList');
      const emptyState = document.getElementById('emptyState');
      
      // Get all students as array
      let studentsArray = Object.entries(studentsData).map(([id, student]) => ({
        id,
        ...student
      }));
      
      // Filter by kelas if needed
      if (currentKelasFilter !== 'all') {
        studentsArray = studentsArray.filter(s => s.kelas === currentKelasFilter);
      }
      
      if (studentsArray.length === 0) {
        studentsList.innerHTML = '';
        emptyState.classList.remove('hidden');
        return;
      }
      
      // Sort students
      if (currentSort === 'kelas-absen') {
        studentsArray.sort((a, b) => {
          const kelasCompare = (a.kelas || '').localeCompare(b.kelas || '');
          if (kelasCompare !== 0) return kelasCompare;
          return parseInt(a.absen || 0) - parseInt(b.absen || 0);
        });
      } else if (currentSort === 'absen') {
        studentsArray.sort((a, b) => parseInt(a.absen || 0) - parseInt(b.absen || 0));
      } else if (currentSort === 'nama') {
        studentsArray.sort((a, b) => (a.nama || '').localeCompare(b.nama || ''));
      }
      
      emptyState.classList.add('hidden');
      studentsList.innerHTML = '';
      
      studentsArray.forEach((student) => {
        const card = document.createElement('div');
        card.className = 'p-6 rounded-lg shadow-md transition-all hover:shadow-lg';
        card.style.backgroundColor = window.elementSdk?.config?.card_color || defaultConfig.card_color;
        card.innerHTML = `
          <h3 class="text-xl font-bold mb-2" style="color: ${window.elementSdk?.config?.text_color || defaultConfig.text_color};">${student.nama || 'Tanpa Nama'}</h3>
          <div class="mb-4 space-y-1">
            <p style="color: ${window.elementSdk?.config?.secondary_text_color || defaultConfig.secondary_text_color};"><strong>Absen:</strong> ${student.absen || '-'}</p>
            <p style="color: ${window.elementSdk?.config?.secondary_text_color || defaultConfig.secondary_text_color};"><strong>NIS:</strong> ${student.nis || '-'}</p>
            <p style="color: ${window.elementSdk?.config?.secondary_text_color || defaultConfig.secondary_text_color};"><strong>Kelas:</strong> ${student.kelas || '-'}</p>
          </div>
          <div class="flex gap-2">
            <button onclick="editStudent('${student.id}')" class="flex-1 px-4 py-2 rounded-lg font-semibold transition-all" style="background-color: ${window.elementSdk?.config?.primary_color || defaultConfig.primary_color}; color: white;">
              ‚úèÔ∏è Edit
            </button>
            <button onclick="showDeleteConfirmation('${student.id}')" class="flex-1 px-4 py-2 rounded-lg font-semibold transition-all" style="background-color: #dc2626; color: white;">
              üóëÔ∏è Hapus
            </button>
          </div>
        `;
        studentsList.appendChild(card);
      });
      
      // Update kelas filter options
      updateKelasFilter();
    }
    
    // Update kelas filter dropdown
    function updateKelasFilter() {
      const kelasFilter = document.getElementById('kelasFilter');
      const kelasSet = new Set();
      
      Object.values(studentsData).forEach(student => {
        if (student.kelas) {
          kelasSet.add(student.kelas);
        }
      });
      
      const sortedKelas = Array.from(kelasSet).sort();
      
      kelasFilter.innerHTML = '<option value="all">Semua Kelas</option>';
      sortedKelas.forEach(kelas => {
        const option = document.createElement('option');
        option.value = kelas;
        option.textContent = kelas;
        if (kelas === currentKelasFilter) {
          option.selected = true;
        }
        kelasFilter.appendChild(option);
      });
      
      // Show/hide kelas filter based on sort mode
      if (currentSort === 'kelas-absen' && sortedKelas.length > 0) {
        kelasFilter.classList.remove('hidden');
      } else {
        kelasFilter.classList.add('hidden');
        currentKelasFilter = 'all';
      }
    }

    // Show modal
    function showModal(isEdit = false) {
      const modal = document.getElementById('modal');
      const modalTitle = document.getElementById('modalTitle');
      const submitButtonText = document.getElementById('submitButtonText');
      
      modalTitle.textContent = isEdit ? 'Edit Siswa' : 'Tambah Siswa';
      submitButtonText.textContent = isEdit ? 'Perbarui' : 'Simpan';
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }

    // Hide modal
    function hideModal() {
      const modal = document.getElementById('modal');
      modal.classList.add('hidden');
      modal.classList.remove('flex');
      document.getElementById('studentForm').reset();
      currentEditId = null;
    }

    // Show toast notification
    function showToast(message, isError = false) {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toastMessage');
      
      toastMessage.textContent = message;
      toast.style.backgroundColor = isError ? '#dc2626' : '#10b981';
      toast.classList.remove('hidden');
      
      setTimeout(() => {
        toast.classList.add('hidden');
      }, 3000);
    }

    // Add button click
    document.getElementById('addButton').addEventListener('click', () => {
      showModal(false);
    });
    
    // Sort select change
    document.getElementById('sortSelect').addEventListener('change', (e) => {
      currentSort = e.target.value;
      renderStudents();
    });
    
    // Kelas filter change
    document.getElementById('kelasFilter').addEventListener('change', (e) => {
      currentKelasFilter = e.target.value;
      renderStudents();
    });

    // Cancel button click
    document.getElementById('cancelButton').addEventListener('click', () => {
      hideModal();
    });

    // Form submit
    document.getElementById('studentForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const submitButton = document.getElementById('submitButton');
      const submitButtonText = document.getElementById('submitButtonText');
      const originalText = submitButtonText.textContent;
      
      submitButton.disabled = true;
      submitButtonText.innerHTML = '<div class="loading-spinner mx-auto"></div>';
      
      const studentData = {
        nama: document.getElementById('namaInput').value,
        kelas: document.getElementById('kelasInput').value,
        nis: document.getElementById('nisInput').value,
        absen: document.getElementById('absenInput').value
      };
      
      try {
        if (currentEditId) {
          await siswaRef.child(currentEditId).update(studentData);
          showToast('Data siswa berhasil diperbarui!');
        } else {
          await siswaRef.push(studentData);
          showToast('Data siswa berhasil ditambahkan!');
        }
        hideModal();
      } catch (error) {
        showToast('Terjadi kesalahan: ' + error.message, true);
      } finally {
        submitButton.disabled = false;
        submitButtonText.textContent = originalText;
      }
    });

    // Edit student
    window.editStudent = function(id) {
      const student = studentsData[id];
      if (!student) return;
      
      currentEditId = id;
      document.getElementById('namaInput').value = student.nama || '';
      document.getElementById('kelasInput').value = student.kelas || '';
      document.getElementById('nisInput').value = student.nis || '';
      document.getElementById('absenInput').value = student.absen || '';
      
      showModal(true);
    };

    // Show delete confirmation
    window.showDeleteConfirmation = function(id) {
      const student = studentsData[id];
      if (!student) return;
      
      studentToDelete = id;
      document.getElementById('deleteStudentName').textContent = student.nama || 'siswa ini';
      
      const deleteModal = document.getElementById('deleteModal');
      deleteModal.classList.remove('hidden');
      deleteModal.classList.add('flex');
    };

    // Cancel delete
    document.getElementById('cancelDeleteButton').addEventListener('click', () => {
      const deleteModal = document.getElementById('deleteModal');
      deleteModal.classList.add('hidden');
      deleteModal.classList.remove('flex');
      studentToDelete = null;
    });

    // Confirm delete
    document.getElementById('confirmDeleteButton').addEventListener('click', async () => {
      if (!studentToDelete) return;
      
      const confirmButton = document.getElementById('confirmDeleteButton');
      const originalText = confirmButton.textContent;
      confirmButton.disabled = true;
      confirmButton.innerHTML = '<div class="loading-spinner mx-auto"></div>';
      
      try {
        await siswaRef.child(studentToDelete).remove();
        showToast('Data siswa berhasil dihapus!');
        
        const deleteModal = document.getElementById('deleteModal');
        deleteModal.classList.add('hidden');
        deleteModal.classList.remove('flex');
        studentToDelete = null;
      } catch (error) {
        showToast('Terjadi kesalahan: ' + error.message, true);
      } finally {
        confirmButton.disabled = false;
        confirmButton.textContent = originalText;
      }
    });

    // Element SDK Configuration
    async function onConfigChange(config) {
      const appTitle = document.getElementById('appTitle');
      const addButtonText = document.getElementById('addButtonText');
      const app = document.getElementById('app');
      const addButton = document.getElementById('addButton');
      const submitButton = document.getElementById('submitButton');
      
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'system-ui, -apple-system, sans-serif';
      const baseSize = config.font_size || defaultConfig.font_size;
      
      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
      
      appTitle.textContent = config.app_title || defaultConfig.app_title;
      appTitle.style.fontSize = `${baseSize * 2}px`;
      appTitle.style.color = config.text_color || defaultConfig.text_color;
      
      addButtonText.textContent = config.add_button_text || defaultConfig.add_button_text;
      
      app.style.backgroundColor = config.background_color || defaultConfig.background_color;
      addButton.style.backgroundColor = config.primary_color || defaultConfig.primary_color;
      submitButton.style.backgroundColor = config.primary_color || defaultConfig.primary_color;
      
      renderStudents();
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_color: value });
              }
            }
          },
          {
            get: () => config.card_color || defaultConfig.card_color,
            set: (value) => {
              if (window.elementSdk) {
                window.elementSdk.setConfig({ card_color: value });
              }
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              if (window.elementSdk) {
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          },
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              if (window.elementSdk) {
                window.elementSdk.setConfig({ primary_color: value });
              }
            }
          },
          {
            get: () => config.secondary_text_color || defaultConfig.secondary_text_color,
            set: (value) => {
              if (window.elementSdk) {
                window.elementSdk.setConfig({ secondary_text_color: value });
              }
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_family: value });
            }
          }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => {
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["app_title", config.app_title || defaultConfig.app_title],
        ["add_button_text", config.add_button_text || defaultConfig.add_button_text]
      ]);
    }

    // Initialize
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    loadAdminData();
    checkLogin();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99cbc98c61f27d66',t:'MTc2Mjg0MzExMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>